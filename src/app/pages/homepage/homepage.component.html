<!--NavBar-->
<nav class="navbar">
    <div class="navbar_container">
        <a href="/" class="nav_header">
            <h2 class="header" style="display:inline;vertical-align:middle;">UrbanPulse</h2>
        </a>
        <button class="nav_button" (click)="myService.openAuthModal()">
            <i class="fa-solid fa-right-to-bracket"></i> Sign In
        </button>
    </div>
</nav>

<!--Hero Section-->
<div class="main">
    <div class="main_container">
        <h1><i class="fa-solid fa-comments" style="color:#6366f1;margin-right:8px;"></i>Real People. Real Stories.</h1>
        <h2>
            <i class="fa-solid fa-bullhorn" style="color:#7c3aed;margin-right:6px;"></i>
            Be heard. Be bold. Capture the pulse of your city and beyond.
        </h2>
        <div class="button_box">
            <button (click)="myService.openAuthModal()">
                <i class="fa-solid fa-user-plus"></i> Get Started!
            </button>
        </div>
        <div class="filters">
            <input type="text" [(ngModel)]="myService.searchQuery" id="searchInput" placeholder="Search posts..." />
            <select [(ngModel)]="myService.selectedCategory" id="categoryFilter">
                <option value="all">--All Categories--</option>
                <option value="tech">Tech</option>
                <option value="lifestyle">Lifestyle</option>
                <option value="crypto">Crypto</option>
                <option value="family">Family</option>
                <option value="business">Business</option>
                <option value="sports">Sports</option>
                <option value="gaming">Gaming</option>
                <option value="health">Health</option>
                <option value="travel">Travel</option>
                <option value="education">Education</option>
                <option value="entertainment">Entertainment</option>
            </select>
            <button class="search-btn" (click)="myService.loadPosts()">
                <i class="fa-solid fa-magnifying-glass"></i> Search
            </button>
        </div>
        <!-- Posts List -->
<div class="posts-cards-container">
  <div *ngFor="let post of myService.filteredPosts" class="post-card">
    <div class="post-header">
        <div class="post-meta">
        <span class="author"><i class="fa-solid fa-user"></i> {{ post.author }}</span>
        <span class="date"><i class="fa-solid fa-calendar"></i> {{ post.date }}</span>
      </div>
      <span class="category-badge"><i class="fa-solid fa-tag"></i> {{ post.category }}</span>
    </div>
    <img *ngIf="post.image" [src]="post.image" alt="Post image" class="post-image">
    <h2 class="post-title"><i class="fa-solid fa-quote-left"></i> {{ post.title }}</h2>
    <p class="post-description">{{ post.description | slice:0:80 }}<span *ngIf="post.description.length > 80">...</span></p>
    <div class="post-tags">
      <span class="tag-chip" *ngFor="let tag of post.tags">
        <i class="fa-solid fa-hashtag"></i> {{ tag }}
      </span>
    </div>
    <div class="post-actions">
      <button class="icon-btn" (click)="myService.openViewModal(post)">
        <i class="fa-solid fa-eye"></i> View
      </button>
    </div>
  </div>
  <div *ngIf="myService.filteredPosts.length === 0" class="no-posts">
    <i class="fa-regular fa-face-frown"></i> No posts found.
  </div>
</div>
    </div>
</div>

<!-- Error Popup -->
<div *ngIf="myService.formError" class="popup-error" (mouseenter)="myService.clearErrorTimeout()" (mouseleave)="myService.startErrorTimeout()">
    <i class="fa-solid fa-circle-exclamation"></i> {{ myService.formError }}
    <button class="popup-close" (click)="myService.formError='';myService.clearErrorTimeout()">
        <i class="fa-solid fa-xmark"></i>
    </button>
</div>

<!-- Modal -->
<div id="authModal" *ngIf="myService.isAuthOpenModal" class="modal" [class.active]="myService.isAuthOpenModal">
  <div class="modal-content">
    <button class="close" (click)="myService.closeAuthModal()" aria-label="Close">
      <i class="fa-solid fa-arrow-right-from-bracket"></i> <!--<i class="fa-solid fa-arrow-left"></i>-->
    </button>
    <h2>
        Welcome to <span style="color: purple;">BlogSpace</span>
    </h2>
    <div class="tabs">
      <button class="tab active" (click)="myService.switchTab('signin')" [class.active]="myService.isSignInTab" >
        <i class="fa-solid fa-right-to-bracket"></i> Sign In
      </button>
      <button class="tab"  (click)="myService.switchTab('signup')" [class.active]="myService.isSignUpTab">
        <i class="fa-solid fa-user-plus"></i> Sign Up
      </button>
    </div>
    <form id="signinForm" *ngIf="myService.isSignInTab" (ngSubmit)="myService.signIn()" class="auth-form" #form="ngForm" action="homepage.html">
      <input type="email" name="email" [(ngModel)]="myService.signInEmail" placeholder="Email" required />
      <input type="password" name="password" [(ngModel)]="myService.signInPassword" placeholder="Password" required />
      <button type="submit" class="submit-btn">
        <i class="fa-solid fa-arrow-right-to-bracket"></i> Sign In
      </button>
    </form>
    <form id="signupForm" *ngIf="myService.isSignUpTab" (ngSubmit)="myService.signUp()" class="auth-form" #form="ngForm" action="homepage.html">
      <input type="text" name="fullName" [(ngModel)]="myService.signUpFullName" placeholder="Full Name" required />
      <input type="email" name="email" [(ngModel)]="myService.signUpEmail" placeholder="Email" required />
      <input type="password" name="password" [(ngModel)]="myService.signUpPassword" placeholder="Password" required />
      <button type="submit" class="submit-btn">
        <i class="fa-solid fa-user-plus"></i> Sign Up
      </button>
      <div style="font-size:0.9em;color:#888;margin-top:5px;">
        <i class="fa-solid fa-lock"></i>
        Password must be at least 8 characters, include an uppercase letter, a number, and a special character.
      </div>
    </form>
  </div>
</div>

<!-- View Modal -->
<div class="modal-overlay" *ngIf="myService.isViewModal">
  <div class="modal-card view-modal-card">
    <button class="close" (click)="myService.closeViewModal()" aria-label="Close">
      <i class="fa-solid fa-arrow-left"></i>
    </button>
    <div class="view-modal-content">
      <h2 class="view-modal-title"><i class="fa-solid fa-quote-left"></i> {{ myService.post.title }}</h2>
      <div class="view-modal-meta">
        <span><i class="fa-solid fa-user"></i> {{ myService.post.author }}</span>
        <span><i class="fa-solid fa-calendar"></i> {{ myService.post.date }}</span>
        <span class="category-badge"><i class="fa-solid fa-tag"></i> {{ myService.post.category }}</span>
      </div>
      <img *ngIf="myService.post.image" [src]="myService.post.image" alt="Post image" class="view-modal-image">
      <p class="view-modal-description">{{ myService.post.description }}</p>
      <div class="post-tags" *ngIf="myService.post.tags?.length">
        <span class="tag-chip" *ngFor="let tag of myService.post.tags">
          <i class="fa-solid fa-hashtag"></i> {{ tag }}
        </span>
      </div>

    </div>
  </div>
</div>

<!--template-->
<template id="post-template">
  
</template>
<!--<button  id="null" class="editPost">‚úèÔ∏è Edit</button>
            <button id="null" class="deletePost">üóëÔ∏è Delete</button>-->

<!--<button  id="null" class="editPost">‚úèÔ∏è Edit</button>
            <button id="null" class="deletePost">üóëÔ∏è Delete</button>-->
<!--<button  id="null" class="editPost">‚úèÔ∏è Edit</button>
            <button id="null" class="deletePost">üóëÔ∏è Delete</button>-->

